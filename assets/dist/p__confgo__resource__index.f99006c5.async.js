(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"0PMQ":function(e,t,a){"use strict";a.r(t);a("IzEo");var n=a("bx4M"),r=(a("DYRE"),a("zeV3")),o=(a("g9YV"),a("wCAj")),l=(a("14J3"),a("BMrR")),c=(a("5NDa"),a("5rEg")),i=(a("jCWc"),a("kPKH")),u=(a("+L6B"),a("2/Rp")),s=a("k1fw"),d=(a("+BJd"),a("mr32")),m=a("q1tI"),f=a.n(m),p=a("MuoO"),v=a("Hx5s"),g=(a("2qtc"),a("kLXV")),E=(a("BoS7"),a("Sdc0")),b=(a("OaEy"),a("2fM7")),y=(a("7Kak"),a("9yH6")),O=(a("miYZ"),a("tsqr")),h=(a("y8nQ"),a("Vl3Y")),z=a("tJVT"),w=a("fs4O");function R(e){var t=e.visible,a=e.zoneEnv,n=e.tags,r=h["a"].useForm(),o=Object(z["a"])(r,1),l=o[0],i=Object(m["useState"])(),u=Object(z["a"])(i,2),s=u[0],d=u[1];return Object(m["useEffect"])((function(){t&&(e.loadTags(),e.loadZoneEnvTree())}),[t]),f.a.createElement(g["a"],{width:800,visible:e.visible,title:"\u521b\u5efa\u8d44\u6e90",onOk:function(){l.submit()},onCancel:function(){return e.showModalCreateResource(!1)}},f.a.createElement(h["a"],{form:l,labelCol:{span:3},onFinish:function(t){Object(w["c"])(t).then((function(t){0===t.code?(e.onOk&&e.onOk(),O["a"].success("\u521b\u5efa\u6210\u529f"),e.showModalCreateResource(!1)):O["a"].error("\u521b\u5efa\u5931\u8d25:"+t.msg)}))}},f.a.createElement(h["a"].Item,{label:"Env",name:"env",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u73af\u5883"}]},f.a.createElement(y["default"].Group,{onChange:function(e){d(e.target.value),l.resetFields(["zone"])}},Object.keys(a).map((function(e){return f.a.createElement(y["default"].Button,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Zone",name:"zone",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u53ef\u7528\u533a"}]},f.a.createElement(b["a"],null,s&&a[s].map((function(e){return f.a.createElement(b["a"].Option,{key:e.zone_code,value:e.zone_code},e.zone_name)})))),f.a.createElement(h["a"].Item,{label:"Tags",name:"tags"},f.a.createElement(b["a"],{mode:"tags"},n&&n.map((function(e){return f.a.createElement(b["a"].Option,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Name",name:"name",rules:[{type:"regexp",pattern:/^[a-zA-Z0-9]{5,32}$/,message:"\u65e0\u6548\u7684\u8d44\u6e90\u540d\u79f0"},{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u540d\u79f0"}]},f.a.createElement(c["a"],null)),f.a.createElement(h["a"].Item,{label:"Value",name:"value",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u503c"}]},f.a.createElement(c["a"].TextArea,null)),f.a.createElement(h["a"].Item,{label:"\u503c\u53ef\u89c1",name:"visible",help:"\u8d44\u6e90\u503c\u5185\u5bb9\u662f\u5426\u516c\u5f00"},f.a.createElement(E["a"],null)),f.a.createElement(h["a"].Item,{label:"Description",name:"description",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u63cf\u8ff0"}]},f.a.createElement(c["a"].TextArea,null))))}var k=function(e){var t=e.configResource;return{visible:t.modalConfigResourceVisible,zoneEnv:t.zoneEnv,tags:t.tags}},j=function(e){return{loadZoneEnvTree:function(){return e({type:"configResource/loadZoneEnvTree"})},showModalCreateResource:function(t){return e({type:"configResource/showModalCreateResource",payload:t})},loadTags:function(){return e({type:"configResource/loadTags"})}}},x=Object(p["connect"])(k,j),I=x(R),V=a("5CnO"),C=a("7DNP");function M(e){var t=e.visible,a=e.zoneEnv,n=e.tagList,r=e.onOk,o=e.resource,l=o.id,i=o.env,u=o.zone_code,s=o.name,d=o.description,p=o.tags,v=h["a"].useForm(),E=Object(z["a"])(v,1),O=E[0];return Object(m["useEffect"])((function(){t&&(O.resetFields(),e.loadTags())}),[t]),f.a.createElement(g["a"],{width:700,visible:e.visible,title:"\u7f16\u8f91\u8d44\u6e90",onOk:function(){O.submit()},onCancel:function(){return e.showModalEdit({visible:!1})}},f.a.createElement(h["a"],{form:O,labelCol:{span:3},onFinish:function(t){console.log(t),e.createResourceVersion({id:l,value:t.value,tags:t.tags,description:t.description}).then((function(t){0===t.code&&(e.showModalEdit({visible:!1}),r&&r())}))}},f.a.createElement(h["a"].Item,{label:"Env",name:"env",initialValue:i},f.a.createElement(y["default"].Group,{disabled:!0},Object.keys(a).map((function(e){return f.a.createElement(y["default"].Button,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Zone",name:"zone",initialValue:u},f.a.createElement(b["a"],{disabled:!0},i&&a[i].map((function(e){return f.a.createElement(b["a"].Option,{key:e.zone_code,value:e.zone_code},e.zone_name)})))),f.a.createElement(h["a"].Item,{label:"Tags",name:"tags",initialValue:p},f.a.createElement(b["a"],{mode:"tags"},n&&n.map((function(e){return f.a.createElement(b["a"].Option,{key:e,value:e},e)})))),f.a.createElement(h["a"].Item,{label:"Name",name:"name",initialValue:s,rules:[{type:"regexp",pattern:/^[a-zA-Z0-9]{5,32}$/,message:"\u65e0\u6548\u7684\u8d44\u6e90\u540d\u79f0"}]},f.a.createElement(c["a"],{disabled:!0})),f.a.createElement(h["a"].Item,{label:"Value",name:"value",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u503c"}]},f.a.createElement(c["a"].TextArea,null)),f.a.createElement(h["a"].Item,{label:"Description",name:"description",initialValue:d,required:!0,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d44\u6e90\u63cf\u8ff0"}]},f.a.createElement(c["a"].TextArea,{placeholder:"\u63cf\u8ff0\u4e0b\u672c\u8d44\u6e90\u548c\u8d44\u6e90\u53d8\u52a8"}))))}var q=function(e){var t=e.configResource;return{resource:t.currentEditResource,visible:t.modalConfigResourceEditVisible,zoneEnv:t.zoneEnv,tagList:t.tags}},T=function(e){return{showModalEdit:function(t){return e({type:"configResource/showModalEdit",payload:t})},createResourceVersion:function(t){return e({type:"configResource/createResourceVersion",payload:t})},loadTags:function(){return e({type:"configResource/loadTags"})}}},L=Object(p["connect"])(q,T)(M),_=a("wd/R"),S=a.n(_);function H(e){var t=e.zoneEnv,a=e.list,p=e.loadZoneEnvTree,g=e.listLoading,E=e.loadList,b=e.showModalCreateResource,y=e.location.query,O=y.page,h=void 0===O?0:O,z=y.pageSize,w=void 0===z?10:z,R=y.env,k=void 0===R?null:R,j=y.zone,x=void 0===j?null:j,M=y.query,q=void 0===M?"":M;Object(m["useEffect"])((function(){p(),E(0,10,q)}),[]);var T=[{title:"ID",key:"id",dataIndex:"id"},{title:"Env",key:"env",dataIndex:"env",filters:Object.keys(t).map((function(e){return{text:e,value:e}}))},{title:"Zone",key:"zone_code",dataIndex:"zone_code",filters:function(){var e={};return Object.keys(t).map((function(a){t[a].map((function(t){e[t.zone_code]=t}))})),Object.keys(e).map((function(e){return{text:e,value:e}}))}()},{title:"Name",key:"name",dataIndex:"name"},{title:"Tags",key:"tags",dataIndex:"tags",render:function(e){return e&&e.map((function(e){return f.a.createElement(d["a"],{color:"blue"},e)}))}},{title:"Description",key:"description",dataIndex:"description"},{title:"Latest Version",key:"latest_version",dataIndex:"latest_version",render:function(e){return f.a.createElement(d["a"],null,e)}},{title:"Last Update",key:"last_update",dataIndex:"last_update",render:function(e){return S()(e).format("YYYY-MM-DD HH:mm:ss")}}],_=function(t,a,n){E(t.current-1,t.pageSize,q,a.env,a.zone_code),e.dispatch(C["routerRedux"].push({query:Object(s["a"])(Object(s["a"])(Object(s["a"])({},e.location.query),a),{},{page:t.page,pageSize:t.pageSize})}))},H=function(t){e.dispatch(C["routerRedux"].push({query:Object(s["a"])(Object(s["a"])({},e.location.query),{},{query:t})})),E(h,w,t,k,x)};return f.a.createElement(v["PageHeaderWrapper"],null,f.a.createElement(n["a"],null,f.a.createElement(r["a"],{direction:"vertical",style:{width:"100%"}},f.a.createElement(l["a"],{justify:"space-between"},f.a.createElement(i["a"],null,f.a.createElement(u["default"],{onClick:function(){return b(!0)}},f.a.createElement(V["a"],null),"\u65b0\u5efa")),f.a.createElement(i["a"],null,f.a.createElement(c["a"].Search,{defaultValue:q,onSearch:H,placeholder:"\u641c\u7d22\u8d44\u6e90\u540d\u79f0"}))),f.a.createElement(o["a"],{loading:g,rowKey:"id",columns:[].concat(T,[{title:"\u64cd\u4f5c",render:function(t){return f.a.createElement(u["default"].Group,null,f.a.createElement(u["default"],{onClick:function(){console.log(t),e.showModalEdit(Object(s["a"])({visible:!0},t))}},"\u66f4\u65b0"))}}]),dataSource:a,onChange:_}))),f.a.createElement(I,{onOk:function(){return E()}}),f.a.createElement(L,{onOk:function(){return E()}}))}var P=function(e){var t=e.configResource;return{zoneEnv:t.zoneEnv,list:t.list,listLoading:t.listLoading,pagination:t.pagination}},Z=function(e){return{loadZoneEnvTree:function(){return e({type:"configResource/loadZoneEnvTree"})},loadList:function(t,a,n,r,o){return e({type:"configResource/loadList",payload:{page:t,pageSize:a,query:n,env:r,zone:o}})},showModalCreateResource:function(t){return e({type:"configResource/showModalCreateResource",payload:t})},showModalEdit:function(t){return e({type:"configResource/showModalEdit",payload:t})},dispatch:e}};t["default"]=Object(p["connect"])(P,Z)(H)},"5CnO":function(e,t,a){"use strict";var n=a("q1tI"),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"},o=r,l=a("6VBw"),c=function(e,t){return n["createElement"](l["a"],Object.assign({},e,{ref:t,icon:o}))};c.displayName="FileAddOutlined";t["a"]=n["forwardRef"](c)},"7DNP":function(e,t,a){e.exports=a("55Ip"),e.exports.routerRedux=a("L342")},DYRE:function(e,t,a){"use strict";a("cIOH"),a("OPEp")},OPEp:function(e,t,a){},zeV3:function(e,t,a){"use strict";var n=a("q1tI"),r=a("TSYQ"),o=a.n(r),l=a("Zm9Q"),c=a("H84U");function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i.apply(this,arguments)}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},d={small:8,middle:16,large:24},m=function(e){var t,a=n["useContext"](c["b"]),r=a.getPrefixCls,m=a.space,f=a.direction,p=e.size,v=void 0===p?(null===m||void 0===m?void 0:m.size)||"small":p,g=e.align,E=e.className,b=e.children,y=e.direction,O=void 0===y?"horizontal":y,h=e.prefixCls,z=s(e,["size","align","className","children","direction","prefixCls"]),w=Object(l["a"])(b),R=w.length;if(0===R)return null;var k=void 0===g&&"horizontal"===O?"center":g,j=r("space",h),x=o()(j,"".concat(j,"-").concat(O),(t={},u(t,"".concat(j,"-rtl"),"rtl"===f),u(t,"".concat(j,"-align-").concat(k),k),t),E),I="".concat(j,"-item"),V="rtl"===f?"marginLeft":"marginRight";return n["createElement"]("div",i({className:x},z),w.map((function(e,t){return n["createElement"]("div",{className:I,key:"".concat(I,"-").concat(t),style:t===R-1?{}:u({},"vertical"===O?"marginBottom":V,"string"===typeof v?d[v]:v)},e)})))};t["a"]=m}}]);